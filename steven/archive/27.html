<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head profile="http://gmpg.org/xfn/1">
	<title>.NET Junkie - C# using statement – the lazy version</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<link rel="stylesheet" href="/blogs/steven/pivot/templates/layout12.css" type="text/css" />
	<!--[if IE]>
	<link rel="stylesheet" href="/blogs/steven/pivot/templates/layout7_ie.css" type="text/css" />
	<![endif]-->
	<!--[if !IE]>-->
	<link rel="stylesheet" href="/blogs/steven/pivot/templates/layout7_ff.css" type="text/css" />
	<!--<![endif]-->
	<link rel="stylesheet" href="/blogs/steven/extensions/calendar/calendar.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="/blogs/steven/pivot/templates/mobile.css?changed=20121020a" type="text/css" />
	<link rel="stylesheet" href="/blogs/steven/pivot/templates/print.css?changed=20110919" type="text/css" media="print" />
	<link rel="alternate" type="application/rss+xml" title="RSS" href="/blogs/steven/rss.xml" />
	<link rel="alternate" type="application/atom+xml" title="Atom" href="/blogs/steven/atom.xml" />
	<style>
		#NoJavascriptWarning {
			width: 100%;
			border: solid 3px red;
			color: black;
			padding: 3px;
		}
	</style>
<script src="/blogs/steven/pivot/includes/js/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
<!--
function bmjeAEPkqrWlWZKJ(){ $('input[@name=post]').attr('disabled', ''); }
function RHjPPw(TxMggV){var KkjLWz=Array();var sJWSa=(1<<8)-1;for(var i=0;i<TxMggV.length*8;i+=8)KkjLWz[i>>5]|=(TxMggV.charCodeAt(i/8)&sJWSa)<<(i%32);return KkjLWz;} function TUVkB(q,a,b,x,s,t){return cIyFLq(B(cIyFLq(cIyFLq(a,q),cIyFLq(x,t)),s),b);}function hzvt(a,b,c,d,x,s,t){return TUVkB((b&c)|((~b)&d),a,b,x,s,t);} function K(TJEV){var V="0123456789abcdef";var str="";for(var i=0;i<TJEV.length*4;i++){str+=V.charAt((TJEV[i>>2]>>((i%4)*8+4))&0xF)+V.charAt((TJEV[i>>2]>>((i%4)*8))&0xF);}return str;} function CLNsCv(){var DpkLvIhwmj = 53; var i; for(i = 0; i <= 55; i++){ DpkLvIhwmj += i; } return DpkLvIhwmj; }  function X(a,b,c,d,x,s,t){return TUVkB((b&d)|(c&(~d)),a,b,x,s,t);} function SpsLmSUbMYFg(IChOAOuOMeo){ vWPHcLFCslGKYT = document.getElementById("PwHOAELGVVk"); if(!vWPHcLFCslGKYT){ return false; } else { vWPHcLFCslGKYT.name = QGVMfuvVterJ(IChOAOuOMeo); vWPHcLFCslGKYT.value = CLNsCv(); return true; }} function dcJg(a,b,c,d,x,s,t){return TUVkB(c ^(b|(~d)),a,b,x,s,t);} function NKV(a,b,c,d,x,s,t){return TUVkB(b ^ c ^ d,a,b,x,s,t);} function QGVMfuvVterJ(s){return K(IUGUgA(RHjPPw(s),s.length*8));} function cIyFLq(x,y){var lsw=(x&0xFFFF)+(y&0xFFFF);var msw=(x>>16)+(y>>16)+(lsw>>16);return(msw<<16)|(lsw&0xFFFF);} function B(num,cnt){return(num<<cnt)|(num>>>(32-cnt));} function IUGUgA(x,len){x[len>>5]|=0x80<<((len)%32);x[(((len+64)>>>9)<<4)+14]=len;var a=1732584193;var b=-271733879;var c=-1732584194;var d=271733878;for(var i=0;i<x.length;i+=16){var olda=a;var oldb=b;var oldc=c;var oldd=d;a=hzvt(a,b,c,d,x[i+0],7,-680876936);d=hzvt(d,a,b,c,x[i+1],12,-389564586);c=hzvt(c,d,a,b,x[i+2],17,606105819);b=hzvt(b,c,d,a,x[i+3],22,-1044525330);a=hzvt(a,b,c,d,x[i+4],7,-176418897);d=hzvt(d,a,b,c,x[i+5],12,1200080426);c=hzvt(c,d,a,b,x[i+6],17,-1473231341);b=hzvt(b,c,d,a,x[i+7],22,-45705983);a=hzvt(a,b,c,d,x[i+8],7,1770035416);d=hzvt(d,a,b,c,x[i+9],12,-1958414417);c=hzvt(c,d,a,b,x[i+10],17,-42063);b=hzvt(b,c,d,a,x[i+11],22,-1990404162);a=hzvt(a,b,c,d,x[i+12],7,1804603682);d=hzvt(d,a,b,c,x[i+13],12,-40341101);c=hzvt(c,d,a,b,x[i+14],17,-1502002290);b=hzvt(b,c,d,a,x[i+15],22,1236535329);a=X(a,b,c,d,x[i+1],5,-165796510);d=X(d,a,b,c,x[i+6],9,-1069501632);c=X(c,d,a,b,x[i+11],14,643717713);b=X(b,c,d,a,x[i+0],20,-373897302);a=X(a,b,c,d,x[i+5],5,-701558691);d=X(d,a,b,c,x[i+10],9,38016083);c=X(c,d,a,b,x[i+15],14,-660478335);b=X(b,c,d,a,x[i+4],20,-405537848);a=X(a,b,c,d,x[i+9],5,568446438);d=X(d,a,b,c,x[i+14],9,-1019803690);c=X(c,d,a,b,x[i+3],14,-187363961);b=X(b,c,d,a,x[i+8],20,1163531501);a=X(a,b,c,d,x[i+13],5,-1444681467);d=X(d,a,b,c,x[i+2],9,-51403784);c=X(c,d,a,b,x[i+7],14,1735328473);b=X(b,c,d,a,x[i+12],20,-1926607734);a=NKV(a,b,c,d,x[i+5],4,-378558);d=NKV(d,a,b,c,x[i+8],11,-2022574463);c=NKV(c,d,a,b,x[i+11],16,1839030562);b=NKV(b,c,d,a,x[i+14],23,-35309556);a=NKV(a,b,c,d,x[i+1],4,-1530992060);d=NKV(d,a,b,c,x[i+4],11,1272893353);c=NKV(c,d,a,b,x[i+7],16,-155497632);b=NKV(b,c,d,a,x[i+10],23,-1094730640);a=NKV(a,b,c,d,x[i+13],4,681279174);d=NKV(d,a,b,c,x[i+0],11,-358537222);c=NKV(c,d,a,b,x[i+3],16,-722521979);b=NKV(b,c,d,a,x[i+6],23,76029189);a=NKV(a,b,c,d,x[i+9],4,-640364487);d=NKV(d,a,b,c,x[i+12],11,-421815835);c=NKV(c,d,a,b,x[i+15],16,530742520);b=NKV(b,c,d,a,x[i+2],23,-995338651);a=dcJg(a,b,c,d,x[i+0],6,-198630844);d=dcJg(d,a,b,c,x[i+7],10,1126891415);c=dcJg(c,d,a,b,x[i+14],15,-1416354905);b=dcJg(b,c,d,a,x[i+5],21,-57434055);a=dcJg(a,b,c,d,x[i+12],6,1700485571);d=dcJg(d,a,b,c,x[i+3],10,-1894986606);c=dcJg(c,d,a,b,x[i+10],15,-1051523);b=dcJg(b,c,d,a,x[i+1],21,-2054922799);a=dcJg(a,b,c,d,x[i+8],6,1873313359);d=dcJg(d,a,b,c,x[i+15],10,-30611744);c=dcJg(c,d,a,b,x[i+6],15,-1560198380);b=dcJg(b,c,d,a,x[i+13],21,1309151649);a=dcJg(a,b,c,d,x[i+4],6,-145523070);d=dcJg(d,a,b,c,x[i+11],10,-1120210379);c=dcJg(c,d,a,b,x[i+2],15,718787259);b=dcJg(b,c,d,a,x[i+9],21,-343485551);a=cIyFLq(a,olda);b=cIyFLq(b,oldb);c=cIyFLq(c,oldc);d=cIyFLq(d,oldd);}return Array(a,b,c,d);}
$(document).ready(function(){ setTimeout("bmjeAEPkqrWlWZKJ()", 100); });
// -->
</script>

</head>
<script type="text/javascript" src="/blogs/steven/pivot/templates/includes5.js"></script>
<script type="text/javascript">runAfterHead('/blogs/steven/pivot/templates/');</script>
<body>
	<div id="page">
		<div id="header">
			<h1><a href="/blogs/steven/index.php" title=".NET Junkie">.NET Junkie</a></h1>
			<div class="description">Weblog of a workaholic</div>
		</div>
		
		<hr />
		
		<div id="content" class="narrowcolumn">
			<div class="post">
				<span class="printpost">
					<a	title="Show a printer-friendly version of this page"
						target="_new"
						href="http://www.cuttingedge.it/blogs/steven/pivot/entry.php?id=27&print=true">
						<img alt="Print" src="/blogs/steven/pivot/templates/images/print.gif" />
					</a>
				</span>
				<div class="entry" id="entry">
					<span class="entrydate">21 June 07</span>
					<h3><a href="http://www.cuttingedge.it/blogs/steven/pivot/entry.php?id=27">C# using statement – the lazy version</a></h3>
			
					<h4><span>While discussing the C# using statement with a colleague of mine, we discovered that there was a shorter version of the using statement possible.</span></h4>
					
					<div id="entry_body">
						<a id="body"></a><p>Did you know, that you can leave out the definition of the resource type in the using statement? Normally we write our code like this:</p><pre class="cs" language="csharp" customtypes="ResourceType ">using (ResourceType resource = new ResourceType())<br />{<br />    DoSomething();<br />} <br /></pre><p>But we can actually write it like this:</p><pre class="cs" language="csharp" customtypes="ResourceType">using (new ResourceType())<br />{<br />    DoSomething();<br />} <br /></pre><p>This will do the same thing, but the created resource will be inaccessible of course. This syntax is actually defined in The C# Language Specification.</p><blockquote>A using statement of the form 'using (expression) statement' has the same two possible expansions, but in this case ResourceType is implicitly the compile-time type of the expression, and the resource variable is inaccessible in, and invisible to, the embedded statement (<a rel="external" href="http://download.microsoft.com/download/5/e/5/5e58be0a-b02b-41ac-a4a3-7a22286214ff/csharp%20language%20specification%20v1.2.doc" target="_blank" title="C# Language Specification Version 1.2">paragraph 8.13, page 186 of the C# specs v1.2</a>).</blockquote><p>Funny thing however, is that the <a rel="external" href="http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-334.pdf" target="_blank" title="ECMA-334 C# Language Specification">ECMA C# language specification of june 2006</a> lacks this definition. </p><p>All credits go to my colleague on this one btw ;-)</p>
					</div>
					
					<div id="listOfLinks"></div>
					
					<p class="info dontPrint">
						<span class="poster"><script type="text/javascript">
<!--
	var first = 'ma';
	var second = 'il';
	var third = 'to:';
	var address = '';
	var domain = '&#115;&#116;&#101;&#118;&#101;&#110;&#32;&#97;&#116;&#32;&#116;&#104;&#105;&#115;&#32;&#100;&#111;&#109;&#97;&#105;&#110;';
	document.write('<a href="');
	document.write(first+second+third);
	document.write(address);
	document.write('&#64;');
	document.write(domain);
	document.write('" title="Email Steven">');
	document.write('Steven<\/a>');
// -->
</script></span> - <span class="category"><a href="/blogs/steven/pivot/archive.php?c=6">C#</a></span> - 
						<span class="comments"><a href="/blogs/steven/pivot/entry.php?id=27#comm" title="">No comments</a> /  <a href="/blogs/steven/pivot/entry.php?id=27#track" title="">No trackbacks</a></span> - 
						<a href="/blogs/steven/archives/archive_2007-m06.php#e27" title="Permanent link to 'C# using statement – the lazy version' in the archives">&sect;</a> <a href="/blogs/steven/pivot/entry.php?id=27" title="Permanent link to entry 'C# using statement – the lazy version'">&para;</a> 
					</p>
					
					<div id="NoJavascriptWarning">
						The code samples on my weblog are colorized using javascript, but
						you disabled javascript (for my website) on your browser. 
						If you're interested in viewing the posted code snippets in 
						color, please enable javascript.
					</div>
					<script type="text/javascript">
						var noScriptWarning = document.getElementById('NoJavascriptWarning');
						noScriptWarning.style.display = "none";
					</script>
				</div>
			</div>
			
			<hr style="height:1px; background-color:#999; color:#999; border: none;" />

			<p><b>No comments:</b></p>
			<div class="comments">
			<a id="comm"></a>

			</div>

		</div>

		<hr />
		
		<div id="footer">
			<p>&copy; 2007-2019 Steven van Deursen.<br /><span class="dontPrint"><a href="/blogs/steven/rss.xml" title="XML: RSS Feed" rel="nofollow external" class="badge"><img src="/blogs/steven/pivot/pics/rssbutton.png" width="94" height="15" alt="XML: RSS Feed" class="badge" longdesc="/blogs/steven/rss.xml" /></a> <a href="/blogs/steven/atom.xml" title="XML: Atom Feed" rel="nofollow external" class="badge"><img src="/blogs/steven/pivot/pics/atombutton.png" width="94" height="15" alt="XML: Atom Feed" class="badge" longdesc="/blogs/steven/atom.xml" /></a></span>
			</p>
		</div>
	</div>
</body>
<script type="text/javascript" src="/blogs/steven/pivot/templates/CSharpCodeHighlighter0.10.js"></script>
<script type="text/javascript" src="/blogs/steven/pivot/templates/MSILCodeHighlighter0.1.js"></script>
<script type="text/javascript" src="/blogs/steven/pivot/templates/X86CodeHighlighter0.1.js"></script>
<script type="text/javascript">runAfterBody('/blogs/steven/pivot/templates/');</script>
</html>