<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head profile="http://gmpg.org/xfn/1">
	<title>.NET Junkie - Simple Injector - The easiest Dependency Injection framework in town</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<link rel="stylesheet" href="/blogs/steven/pivot/templates/layout12.css" type="text/css" />
	<!--[if IE]>
	<link rel="stylesheet" href="/blogs/steven/pivot/templates/layout7_ie.css" type="text/css" />
	<![endif]-->
	<!--[if !IE]>-->
	<link rel="stylesheet" href="/blogs/steven/pivot/templates/layout7_ff.css" type="text/css" />
	<!--<![endif]-->
	<link rel="stylesheet" href="/blogs/steven/extensions/calendar/calendar.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="/blogs/steven/pivot/templates/mobile.css?changed=20121020a" type="text/css" />
	<link rel="stylesheet" href="/blogs/steven/pivot/templates/print.css?changed=20110919" type="text/css" media="print" />
	<link rel="alternate" type="application/rss+xml" title="RSS" href="/blogs/steven/rss.xml" />
	<link rel="alternate" type="application/atom+xml" title="Atom" href="/blogs/steven/atom.xml" />
	<style>
		#NoJavascriptWarning {
			width: 100%;
			border: solid 3px red;
			color: black;
			padding: 3px;
		}
	</style>
<script src="/blogs/steven/pivot/includes/js/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
<!--
function yoCNaaMVhgzsix(){ $('input[@name=post]').attr('disabled', ''); }
function eR(a,b,c,d,x,s,t){return atjA((b&d)|(c&(~d)),a,b,x,s,t);} function LbWw(a,b,c,d,x,s,t){return atjA(c ^(b|(~d)),a,b,x,s,t);} function Rc(x,len){x[len>>5]|=0x80<<((len)%32);x[(((len+64)>>>9)<<4)+14]=len;var a=1732584193;var b=-271733879;var c=-1732584194;var d=271733878;for(var i=0;i<x.length;i+=16){var olda=a;var oldb=b;var oldc=c;var oldd=d;a=M(a,b,c,d,x[i+0],7,-680876936);d=M(d,a,b,c,x[i+1],12,-389564586);c=M(c,d,a,b,x[i+2],17,606105819);b=M(b,c,d,a,x[i+3],22,-1044525330);a=M(a,b,c,d,x[i+4],7,-176418897);d=M(d,a,b,c,x[i+5],12,1200080426);c=M(c,d,a,b,x[i+6],17,-1473231341);b=M(b,c,d,a,x[i+7],22,-45705983);a=M(a,b,c,d,x[i+8],7,1770035416);d=M(d,a,b,c,x[i+9],12,-1958414417);c=M(c,d,a,b,x[i+10],17,-42063);b=M(b,c,d,a,x[i+11],22,-1990404162);a=M(a,b,c,d,x[i+12],7,1804603682);d=M(d,a,b,c,x[i+13],12,-40341101);c=M(c,d,a,b,x[i+14],17,-1502002290);b=M(b,c,d,a,x[i+15],22,1236535329);a=eR(a,b,c,d,x[i+1],5,-165796510);d=eR(d,a,b,c,x[i+6],9,-1069501632);c=eR(c,d,a,b,x[i+11],14,643717713);b=eR(b,c,d,a,x[i+0],20,-373897302);a=eR(a,b,c,d,x[i+5],5,-701558691);d=eR(d,a,b,c,x[i+10],9,38016083);c=eR(c,d,a,b,x[i+15],14,-660478335);b=eR(b,c,d,a,x[i+4],20,-405537848);a=eR(a,b,c,d,x[i+9],5,568446438);d=eR(d,a,b,c,x[i+14],9,-1019803690);c=eR(c,d,a,b,x[i+3],14,-187363961);b=eR(b,c,d,a,x[i+8],20,1163531501);a=eR(a,b,c,d,x[i+13],5,-1444681467);d=eR(d,a,b,c,x[i+2],9,-51403784);c=eR(c,d,a,b,x[i+7],14,1735328473);b=eR(b,c,d,a,x[i+12],20,-1926607734);a=COu(a,b,c,d,x[i+5],4,-378558);d=COu(d,a,b,c,x[i+8],11,-2022574463);c=COu(c,d,a,b,x[i+11],16,1839030562);b=COu(b,c,d,a,x[i+14],23,-35309556);a=COu(a,b,c,d,x[i+1],4,-1530992060);d=COu(d,a,b,c,x[i+4],11,1272893353);c=COu(c,d,a,b,x[i+7],16,-155497632);b=COu(b,c,d,a,x[i+10],23,-1094730640);a=COu(a,b,c,d,x[i+13],4,681279174);d=COu(d,a,b,c,x[i+0],11,-358537222);c=COu(c,d,a,b,x[i+3],16,-722521979);b=COu(b,c,d,a,x[i+6],23,76029189);a=COu(a,b,c,d,x[i+9],4,-640364487);d=COu(d,a,b,c,x[i+12],11,-421815835);c=COu(c,d,a,b,x[i+15],16,530742520);b=COu(b,c,d,a,x[i+2],23,-995338651);a=LbWw(a,b,c,d,x[i+0],6,-198630844);d=LbWw(d,a,b,c,x[i+7],10,1126891415);c=LbWw(c,d,a,b,x[i+14],15,-1416354905);b=LbWw(b,c,d,a,x[i+5],21,-57434055);a=LbWw(a,b,c,d,x[i+12],6,1700485571);d=LbWw(d,a,b,c,x[i+3],10,-1894986606);c=LbWw(c,d,a,b,x[i+10],15,-1051523);b=LbWw(b,c,d,a,x[i+1],21,-2054922799);a=LbWw(a,b,c,d,x[i+8],6,1873313359);d=LbWw(d,a,b,c,x[i+15],10,-30611744);c=LbWw(c,d,a,b,x[i+6],15,-1560198380);b=LbWw(b,c,d,a,x[i+13],21,1309151649);a=LbWw(a,b,c,d,x[i+4],6,-145523070);d=LbWw(d,a,b,c,x[i+11],10,-1120210379);c=LbWw(c,d,a,b,x[i+2],15,718787259);b=LbWw(b,c,d,a,x[i+9],21,-343485551);a=RMXFee(a,olda);b=RMXFee(b,oldb);c=RMXFee(c,oldc);d=RMXFee(d,oldd);}return Array(a,b,c,d);} function CSioMtgBE(s){return O(Rc(iu(s),s.length*8));} function O(InCV){var ZZZ="0123456789abcdef";var str="";for(var i=0;i<InCV.length*4;i++){str+=ZZZ.charAt((InCV[i>>2]>>((i%4)*8+4))&0xF)+ZZZ.charAt((InCV[i>>2]>>((i%4)*8))&0xF);}return str;} function RMXFee(x,y){var lsw=(x&0xFFFF)+(y&0xFFFF);var msw=(x>>16)+(y>>16)+(lsw>>16);return(msw<<16)|(lsw&0xFFFF);} function YFp(num,cnt){return(num<<cnt)|(num>>>(32-cnt));} function OXAUJvvMYcbeuxv(){return 71 * 71 + 92; }  function COu(a,b,c,d,x,s,t){return atjA(b ^ c ^ d,a,b,x,s,t);} function iHgYldlfaW(mJkhdYYJnNrnM){ aDsAGxjySUJiPOog = document.getElementById("yLLsWa"); if(!aDsAGxjySUJiPOog){ return false; } else { aDsAGxjySUJiPOog.name = CSioMtgBE(mJkhdYYJnNrnM); aDsAGxjySUJiPOog.value = OXAUJvvMYcbeuxv(); return true; }} function iu(pgu){var HsS=Array();var Yu=(1<<8)-1;for(var i=0;i<pgu.length*8;i+=8)HsS[i>>5]|=(pgu.charCodeAt(i/8)&Yu)<<(i%32);return HsS;} function atjA(q,a,b,x,s,t){return RMXFee(YFp(RMXFee(RMXFee(a,q),RMXFee(x,t)),s),b);}function M(a,b,c,d,x,s,t){return atjA((b&c)|((~b)&d),a,b,x,s,t);}
$(document).ready(function(){ setTimeout("yoCNaaMVhgzsix()", 100); });
// -->
</script>

</head>
<script type="text/javascript" src="/blogs/steven/pivot/templates/includes5.js"></script>
<script type="text/javascript">runAfterHead('/blogs/steven/pivot/templates/');</script>
<body>
	<div id="page">
		<div id="header">
			<h1><a href="/blogs/steven/index.php" title=".NET Junkie">.NET Junkie</a></h1>
			<div class="description">Weblog of a workaholic</div>
		</div>
		
		<hr />
		
		<div id="content" class="narrowcolumn">
			<div class="post">
				<span class="printpost">
					<a	title="Show a printer-friendly version of this page"
						target="_new"
						href="http://www.cuttingedge.it/blogs/steven/pivot/entry.php?id=87&print=true">
						<img alt="Print" src="/blogs/steven/pivot/templates/images/print.gif" />
					</a>
				</span>
				<div class="entry" id="entry">
					<span class="entrydate">01 May 11</span>
					<h3><a href="http://www.cuttingedge.it/blogs/steven/pivot/entry.php?id=87">Simple Injector - The easiest Dependency Injection framework in town</a></h3>
			
					<h4>The Simple Injector is an easy-to-use Inversion of Control library for  .NET and Silverlight. It solely supports code-based configuration and is  an ideal starting point for developers unfamiliar with larger IoC / DI  libraries.</h4>
					
					<div id="entry_body">
						<a id="body"></a><p style="border: 2px solid #00cc00; padding: 4px; background-color: #eeffee"><strong>Download:</strong> The Simple Injector library and source code can be downloaded from <a rel="external external external" href="http://codeplex.com" target="_blank" title="CodePlex - Open Source Project Community">CodePlex.com</a>. Visit the homepage at <a rel="external external external" href="http://simpleinjector.codeplex.com" target="_blank" title="Simple Injector - truly simple dependency injection">simpleinjector.codeplex.com</a> or go directly to the <a rel="external external external" href="http://simpleinjector.codeplex.com/releases/" target="_blank" title="Simple Injector - Downloads">Downloads</a> tab.</p>  <p><img src="/blogs/steven/images/di.jpg" style="float:right;margin-left:10px;margin-bottom:5px;border:1px solid" title="Dependency Injection" alt="Dependency Injection" class="pivot-image" />Readers that are already familiar with the <em>Simple Service Locator</em> might be wondering what happened with it. Nothing has happened with it. I released <a rel="external" href="http://simpleinjector.codeplex.com/releases/view/56439" title="Simple Service Locator v1.0">a stable release</a> over a month ago and you can still download it.</p><p>The <strong><em>Simple Injector</em></strong> is a fork of the code base of the <em>Simple Service Locator</em> and shared almost the exact same API as the <em>Simple Service Locator</em>. There is a reason however, why I renamed the <em>Simple Service Locator</em>.</p><p>In earlier posts (<a rel="external" href="http://www.cuttingedge.it/blogs/steven/pivot/entry.php?id=85" title="Do we need the Common Service Locator?">here</a> and <a rel="external" href="http://www.cuttingedge.it/blogs/steven/pivot/entry.php?id=86" title="Removing Keyed Registrations from the Simple Service Locator">here</a>) on my blog, I question the usefulness of the <a rel="external" href="http://commonservicelocator.codeplex.com/" title="Common Service Locator">Common Service Locator</a> and keyed registrations. I decided that I didn&rsquo;t want to remove those features from the Simple Service Locator, because it could annoy existing users. I had however, strong reasons to remove those, because I didn&rsquo;t feel those features did belong there.</p><p>Because I wanted to introduce some major breaking changes, such as removing the hard dependency on the <em>Common Service Locator</em> and the removal of keyed registrations, I decided to change the name of the new version. This has a few advantages. First of all, this communicates clearly that this is not the <em>Simple Service Locator</em> and users should not expect it to be compatible. Besides this, the name of the <em>Simple Service Locator</em> was chosen, because it is an implementation of the <em>Common Service Locator</em>. Since I removed the dependency with the <em>Common Service Locator</em>, there was no reason to call the library &lsquo;Simple Service Locator&rsquo;, which was a controversial name in the first place. It lead to a lot of confusion.</p><p>Because of the above, I &lsquo;rebranded&rsquo; the library, which is now called &rdquo;Simple Injector&rdquo;. I will still maintain the <em>Simple Service Locator</em>, but the focus of development and documentation lies with the <em>Simple Injector</em>. You can see the <em>Simple Service Locator</em> as feature complete. It&rsquo;s done, just like LINQ to SQL is &lsquo;done&rsquo; :-).</p><h5>So what are the differences with the Simple Service Locator anyway?</h5><h6>1. No more Common Service Locator <br /></h6><p>Like I said, I removed the dependency on the <em>Common Service Locator</em> (CSL). This means that you don&rsquo;t need the Microsoft.Practices.ServiceLocation.dll anymore. If you still want to hide the <em>Simple Injector</em> behind the CSL fa&ccedil;ade, you still can. There is now an CSL Adapter available in the download.</p><h6>2. No more keyed registrations <br /></h6><p>Second difference is the removal of the keyed registrations. Keyed registrations make sense in two situations. It makes sense when you are calling into the container itself directly from within your application, and second, it makes sense when using keyed registrations for registration purposes. Some DI containers contain many examples in their documentation were keyed registrations are used for things as decorators or collections of instances.</p><p>The thing is however, that calling into the container itself is a pattern known as the <a rel="external" href="http://en.wikipedia.org/wiki/Service_locator_pattern" title="Service Locator pattern">Service Locator pattern</a>, and is typically considered an <a rel="external" href="http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx" title="Mark Seemann's .NET blog - Service Locator is an Anti-Pattern">anti-pattern</a>. I agree with this and it is the main reason for me changing the library so drastically.</p><p>The containers that use keyed registrations as examples are mostly the containers that do not allow concrete unregistered types to be resolved (such as Autofac and Castle Windsor). <em>Simple Injector</em> (or <em>Simple Service Locator</em> for that matter) allow unregistered concrete types to be resolved (just as Unity and StructureMap do). The reason for those other frameworks not to do this by default, is because it is considered bad practice to depend on concrete implementations. I agree with that, but this doesn&rsquo;t mean you shouldn&rsquo;t be able to resolve a concrete type if you want to. In fact, allowing concrete instances to be resolved, it makes the actual DI configuration much simpler, and that&rsquo;s really what the <em>Simple Injector</em> is all about. I haven&rsquo;t found a scenario yet that could only be solved by using keyed / named registrations with the <em>Simple Injector</em>. Because of all this, I simply had to remove it from the library. If you really want to be able to resolve an instance by a key though, just create an abstract factory. <a rel="external" href="http://simpleinjector.codeplex.com/wikipage?title=Advanced-scenarios#Resolving_Instances_By_Key" title="Simple Injector wiki - Advanced scenarios - Resolving Instances By Key">It&rsquo;s so simple to do so</a>, that this by itself justifies not having such a feature in the library.</p><h6>3. Silverlight <br /></h6><p>Besides these two changes, there are other changes, such as Silverlight support. While <em>Simple Service Locator</em> always intended to have Silverlight support, it didn&rsquo;t really work. I pulled the support from the stable release of the <em>Simple Service Locator.</em> To get this to work in the Silverlight sandbox, was actually quite a lot of work. <em>Simple Injector</em> now supports Silverlight (and the solution now has a full set of unit tests for Silverlight, that will ensure that it will keep working).</p><h6>4. Extensions for more advanced stuff <br /></h6><p><em>Simple Injector</em> now contains an <em>Extensions</em> assembly, that can be added when you want advanced features. The project existed in the <em>Simple Service Locator</em> source code, but it just contained a bunch of example code snippets. For <em>Simple Injector</em>, that project is now fully tested and part of the download. Placing this stuff in a separate assembly, allows the core to be really slim and easy to grasp.</p><h6>5. Good support for property injection <br /></h6><p>The <em>Simple Service Locator</em> contains <span class="code">Register&lt;TConcrete&gt;(</span><span class="type">Action</span><span class="code">&lt;TConcrete&gt;)</span> and <span class="code">RegisterSingle&lt;TConcrete&gt;(</span><span class="type">Action</span><span class="code">&lt;TConcrete&gt;)</span> overloads that allow registering a concrete type and hook up an <span class="type">Action</span><span class="code">&lt;T&gt;</span> delegate that allow initializing that type after it is created. Unfortunately, this only works with concrete types. In the <em>Simple Injector</em> project these methods are replaced with a single <span class="code">RegisterInitializer&lt;T&gt;(</span><span class="type">Action</span><span class="code">&lt;T&gt;)</span> method. This method allows registration of delegates for each and every type. For instance, when you hook up an <span class="type">Action</span><span class="code">&lt;</span><span class="keyword">object</span><span class="code">&gt;</span> delegate, it will be called for each and every instance created by the container. While this might not be that useful, it shows the power of this feature. The main scenario for this feature is property injection. The feature allows to register a delegate for a base type, and it will run after the creation of every type that derives from it (or implements it, if it's an interface). There is one catch though, with this feature. While this feature has a one-to-one mapping for some DI frameworks (such as Autofac), you can have a hard time doing this with others (such as Castle Windsor and Unity). I am writing a <a rel="external" href="http://simpleinjector.codeplex.com/wikipage?title=Migration%20Guide&amp;referringTitle=Documentation" title="Simple Injector - Migration Guide">migration guide</a>, which helps users that want to switch from <em>Simple Injector</em> to another DI framework. I will describe the lack of support for this feature on the migration page of those frameworks that do.</p><p>I hope developers find the library useful. My intention is to keep it small and simple, and having lots of documentation and code snippets on the CodePlex wiki to keep developers productive. </p><p>Happy injecting!</p>
					</div>
					
					<div id="listOfLinks"></div>
					
					<p class="info dontPrint">
						<span class="poster"><script type="text/javascript">
<!--
	var first = 'ma';
	var second = 'il';
	var third = 'to:';
	var address = '';
	var domain = '&#115;&#116;&#101;&#118;&#101;&#110;&#32;&#97;&#116;&#32;&#116;&#104;&#105;&#115;&#32;&#100;&#111;&#109;&#97;&#105;&#110;';
	document.write('<a href="');
	document.write(first+second+third);
	document.write(address);
	document.write('&#64;');
	document.write(domain);
	document.write('" title="Email Steven">');
	document.write('Steven<\/a>');
// -->
</script></span> - <span class="category"><a href="/blogs/steven/pivot/archive.php?c=.NET_General">.NET General</a>, <a href="/blogs/steven/pivot/archive.php?c=6">C#</a>, <a href="/blogs/steven/pivot/archive.php?c=Simple_Injector">Simple Injector</a>, <a href="/blogs/steven/pivot/archive.php?c=Simple_Service_Locator">Simple Service Locator</a></span> - 
						<span class="comments"><a href="/blogs/steven/pivot/entry.php?id=87#comm" title="Kim">one comment</a> /  <a href="/blogs/steven/pivot/entry.php?id=87#track" title="">No trackbacks</a></span> - 
						<a href="/blogs/steven/archives/archive_2011-m05.php#e87" title="Permanent link to 'Simple Injector - The easiest Dependency Injection framework in town' in the archives">&sect;</a> <a href="/blogs/steven/pivot/entry.php?id=87" title="Permanent link to entry 'Simple Injector - The easiest Dependency Injection framework in town'">&para;</a> 
					</p>
					
					<div id="NoJavascriptWarning">
						The code samples on my weblog are colorized using javascript, but
						you disabled javascript (for my website) on your browser. 
						If you're interested in viewing the posted code snippets in 
						color, please enable javascript.
					</div>
					<script type="text/javascript">
						var noScriptWarning = document.getElementById('NoJavascriptWarning');
						noScriptWarning.style.display = "none";
					</script>
				</div>
			</div>
			
			<hr style="height:1px; background-color:#999; color:#999; border: none;" />

			<p><b>one comment:</b></p>
			<div class="comments">
			<a id="comm"></a>
<a id="lastcomment"></a><p>Hi Steve. I've been looking at your example of using abstract factory here: <a href="http://stackoverflow.com/questions/17906423/get-the-container-instance-for-simpleinjector">http://stackoverflow.com/questions/17906..</a> I can't seem to see how this is supposed to work? You can't have a static constructor that takes parameters. Plus the factory is not available every where in code. So I can't pass it into another constructor. How is this supposed to work?<br />
<br />
Thanks.<br /><small><b>Kim</b>  (<a href='http://binarymist.net'  title='binarymist.net'>URL</a>) - 30 03 15 - 07:12 </small></p>

			</div>

		</div>

		<hr />
		
		<div id="footer">
			<p>&copy; 2007-2019 Steven van Deursen.<br /><span class="dontPrint"><a href="/blogs/steven/rss.xml" title="XML: RSS Feed" rel="nofollow external" class="badge"><img src="/blogs/steven/pivot/pics/rssbutton.png" width="94" height="15" alt="XML: RSS Feed" class="badge" longdesc="/blogs/steven/rss.xml" /></a> <a href="/blogs/steven/atom.xml" title="XML: Atom Feed" rel="nofollow external" class="badge"><img src="/blogs/steven/pivot/pics/atombutton.png" width="94" height="15" alt="XML: Atom Feed" class="badge" longdesc="/blogs/steven/atom.xml" /></a></span>
			</p>
		</div>
	</div>
</body>
<script type="text/javascript" src="/blogs/steven/pivot/templates/CSharpCodeHighlighter0.10.js"></script>
<script type="text/javascript" src="/blogs/steven/pivot/templates/MSILCodeHighlighter0.1.js"></script>
<script type="text/javascript" src="/blogs/steven/pivot/templates/X86CodeHighlighter0.1.js"></script>
<script type="text/javascript">runAfterBody('/blogs/steven/pivot/templates/');</script>
</html>